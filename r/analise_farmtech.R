# FarmTech Solutions - An√°lise Estat√≠stica de Irriga√ß√£o
# Projeto: Otimiza√ß√£o do sistema de irriga√ß√£o inteligente para tomates
# Autor: Equipe FarmTech
# Data: Janeiro 2025

# ===== CONFIGURA√á√ÉO INICIAL =====
# Carregar bibliotecas necess√°rias
suppressMessages({
  library(ggplot2)     # Gr√°ficos
  library(dplyr)       # Manipula√ß√£o de dados
  library(corrplot)    # Matriz de correla√ß√£o
  library(forecast)    # S√©ries temporais
  library(lubridate)   # Manipula√ß√£o de datas
  library(gridExtra)   # M√∫ltiplos gr√°ficos
  library(scales)      # Formata√ß√£o de escalas
})

# ===== FUN√á√ÉO PARA GERAR DADOS SIMULADOS =====
gerar_dados_irrigacao <- function(n_dias = 30) {
  cat("üìä Gerando dados simulados de irriga√ß√£o para", n_dias, "dias...\n")

  set.seed(42)  # Para reproduzibilidade

  # Gerar dados base
  dados <- data.frame(
    dia = 1:n_dias,
    data = seq(from = as.Date("2025-01-01"),
               by = "day",
               length.out = n_dias)
  )

  # Simular vari√°veis ambientais realistas para tomate
  dados$temperatura <- pmax(15, pmin(35, rnorm(n_dias, mean = 24, sd = 4)))
  dados$umidade_solo <- pmax(20, pmin(95, rnorm(n_dias, mean = 65, sd = 15)))
  dados$ph_solo <- pmax(5.0, pmin(8.0, rnorm(n_dias, mean = 6.4, sd = 0.5)))
  dados$umidade_ar <- pmax(30, pmin(90, rnorm(n_dias, mean = 70, sd = 12)))

  # Simular presen√ßa de nutrientes NPK (0 = inadequado, 1 = adequado)
  dados$nitrogenio <- rbinom(n_dias, 1, 0.75)
  dados$fosforo <- rbinom(n_dias, 1, 0.80)
  dados$potassio <- rbinom(n_dias, 1, 0.85)
  dados$npk_completo <- dados$nitrogenio * dados$fosforo * dados$potassio

  # Simular previs√£o meteorol√≥gica (0 = sem chuva, 1 = chuva prevista)
  dados$previsao_chuva <- rbinom(n_dias, 1, 0.25)
  dados$intensidade_chuva <- ifelse(dados$previsao_chuva == 1,
                                   runif(n_dias, 2, 15), 0)

  # Calcular tempo de irriga√ß√£o baseado na l√≥gica do ESP32
  dados$irrigacao_minutos <- with(dados, {
    # Condi√ß√µes ideais para tomate
    ph_adequado <- (ph_solo >= 6.0 & ph_solo <= 6.8)
    umidade_adequada <- (umidade_solo >= 60 & umidade_solo <= 80)
    npk_ok <- (npk_completo == 1)
    sem_chuva <- (previsao_chuva == 0 | intensidade_chuva < 2.0)

    # Tempo base de irriga√ß√£o
    tempo_base <- 45

    # Ajustes baseados nas condi√ß√µes
    ajuste_temp <- (temperatura - 24) * 1.5
    ajuste_umidade <- (65 - umidade_solo) * 0.8
    ajuste_ph <- ifelse(ph_adequado, 0, 15)
    ajuste_npk <- ifelse(npk_ok, 0, 20)
    ajuste_chuva <- ifelse(sem_chuva, 0, -30)

    # Calcular tempo final de irriga√ß√£o
    tempo_irrigacao <- tempo_base +
                      ajuste_temp +
                      ajuste_umidade +
                      ajuste_ph +
                      ajuste_npk +
                      ajuste_chuva +
                      rnorm(n_dias, 0, 3)

    # Garantir que n√£o seja negativo e limitado a 120 minutos
    pmax(0, pmin(120, tempo_irrigacao))
  })

  # Calcular efici√™ncia do sistema (%)
  dados$eficiencia <- with(dados, {
    base_eficiencia <- 80

    # B√¥nus por condi√ß√µes ideais
    bonus_ph <- ifelse(ph_solo >= 6.0 & ph_solo <= 6.8, 10, 0)
    bonus_umidade <- ifelse(umidade_solo >= 60 & umidade_solo <= 80, 8, 0)
    bonus_npk <- ifelse(npk_completo == 1, 12, 0)
    bonus_clima <- ifelse(temperatura >= 20 & temperatura <= 26, 5, 0)

    eficiencia_total <- base_eficiencia +
                       bonus_ph +
                       bonus_umidade +
                       bonus_npk +
                       bonus_clima +
                       rnorm(n_dias, 0, 2)

    pmax(50, pmin(100, eficiencia_total))
  })

  # Calcular economia de √°gua (litros)
  dados$economia_agua <- with(dados, {
    irrigacao_tradicional <- 60  # minutos de irriga√ß√£o tradicional
    economia_minutos <- pmax(0, irrigacao_tradicional - irrigacao_minutos)
    economia_minutos * 2.5  # 2.5 litros por minuto economizados
  })

  return(dados)
}

# ===== AN√ÅLISE EXPLORAT√ìRIA =====
analise_exploratoria <- function(dados) {
  cat("\nüìà === AN√ÅLISE EXPLORAT√ìRIA ===\n")

  # Estat√≠sticas descritivas
  cat("\nüìä Estat√≠sticas Descritivas:\n")
  variaveis_numericas <- c("temperatura", "umidade_solo", "ph_solo",
                          "irrigacao_minutos", "eficiencia", "economia_agua")

  # Corrigir a fun√ß√£o summary para exibir corretamente
  sumario <- summary(dados[, variaveis_numericas])
  print(sumario)

  # Correla√ß√µes
  cat("\nüîó An√°lise de Correla√ß√£o:\n")
  cor_matrix <- cor(dados[, variaveis_numericas], use = "complete.obs")
  print(round(cor_matrix, 3))

  # Visualizar matriz de correla√ß√£o
  corrplot(cor_matrix, method = "color", type = "upper",
           order = "hclust", tl.cex = 0.8, tl.col = "black",
           title = "Matriz de Correla√ß√£o - Vari√°veis de Irriga√ß√£o",
           mar = c(0,0,2,0))

  # An√°lise de frequ√™ncias
  cat("\nüìã Frequ√™ncias de Nutrientes:\n")
  cat("Nitrog√™nio adequado:", sum(dados$nitrogenio), "/", nrow(dados),
      sprintf("(%.1f%%)\n", mean(dados$nitrogenio) * 100))
  cat("F√≥sforo adequado:", sum(dados$fosforo), "/", nrow(dados),
      sprintf("(%.1f%%)\n", mean(dados$fosforo) * 100))
  cat("Pot√°ssio adequado:", sum(dados$potassio), "/", nrow(dados),
      sprintf("(%.1f%%)\n", mean(dados$potassio) * 100))
  cat("NPK completo:", sum(dados$npk_completo), "/", nrow(dados),
      sprintf("(%.1f%%)\n", mean(dados$npk_completo) * 100))

  return(cor_matrix)
}

# ===== VISUALIZA√á√ïES =====
criar_graficos_principais <- function(dados) {
  cat("\nüìä Gerando gr√°ficos principais...\n")

  # Gr√°fico 1: Tend√™ncia de irriga√ß√£o ao longo do tempo
  p1 <- ggplot(dados, aes(x = data, y = irrigacao_minutos)) +
    geom_line(color = "blue", size = 1, alpha = 0.8) +
    geom_smooth(method = "loess", color = "red", se = TRUE, alpha = 0.3) +
    geom_hline(yintercept = 45, linetype = "dashed", color = "green",
               alpha = 0.7) +
    labs(title = "üìà Irriga√ß√£o Di√°ria ao Longo do Tempo",
         subtitle = "Linha verde = irriga√ß√£o ideal (45 min)",
         x = "Data",
         y = "Irriga√ß√£o (minutos)") +
    theme_minimal() +
    theme(plot.title = element_text(hjust = 0.5, size = 14, face = "bold"),
          plot.subtitle = element_text(hjust = 0.5, size = 11))

  # Gr√°fico 2: Rela√ß√£o pH x Efici√™ncia
  p2 <- ggplot(dados, aes(x = ph_solo, y = eficiencia)) +
    geom_point(aes(color = irrigacao_minutos, size = economia_agua), alpha = 0.7) +
    geom_smooth(method = "lm", color = "darkgreen", se = TRUE) +
    geom_vline(xintercept = c(6.0, 6.8), linetype = "dashed",
               color = "red", alpha = 0.7) +
    scale_color_gradient(low = "lightblue", high = "darkblue",
                        name = "Irriga√ß√£o\n(min)") +
    scale_size_continuous(name = "Economia\n(litros)") +
    labs(title = "üß™ pH do Solo vs. Efici√™ncia do Sistema",
         subtitle = "Linhas vermelhas = faixa ideal para tomate (6.0-6.8)",
         x = "pH do Solo",
         y = "Efici√™ncia (%)") +
    theme_minimal() +
    theme(plot.title = element_text(hjust = 0.5, size = 14, face = "bold"),
          plot.subtitle = element_text(hjust = 0.5, size = 11))

  # Gr√°fico 3: Compara√ß√£o de efici√™ncia por NPK
  dados$npk_status <- factor(dados$npk_completo,
                            levels = c(0, 1),
                            labels = c("NPK Inadequado", "NPK Completo"))

  p3 <- ggplot(dados, aes(x = npk_status, y = eficiencia, fill = npk_status)) +
    geom_boxplot(alpha = 0.7, outlier.alpha = 0.5) +
    geom_jitter(width = 0.2, alpha = 0.5, size = 2) +
    stat_summary(fun = mean, geom = "point", shape = 23, size = 4,
                fill = "yellow", color = "black") +
    scale_fill_manual(values = c("NPK Inadequado" = "#ff7f7f",
                                "NPK Completo" = "#7fff7f")) +
    labs(title = "üå± Efici√™ncia por Status do NPK",
         subtitle = "Losango amarelo = m√©dia",
         x = "Status dos Nutrientes",
         y = "Efici√™ncia (%)",
         fill = "NPK Status") +
    theme_minimal() +
    theme(plot.title = element_text(hjust = 0.5, size = 14, face = "bold"),
          plot.subtitle = element_text(hjust = 0.5, size = 11),
          legend.position = "none")

  # Gr√°fico 4: Economia de √°gua
  p4 <- ggplot(dados, aes(x = irrigacao_minutos, y = economia_agua)) +
    geom_point(aes(color = eficiencia), size = 3, alpha = 0.7) +
    geom_smooth(method = "lm", color = "blue", se = TRUE) +
    scale_color_gradient(low = "red", high = "green", name = "Efici√™ncia\n(%)") +
    labs(title = "üíß Irriga√ß√£o vs. Economia de √Ågua",
         subtitle = "Rela√ß√£o entre tempo de irriga√ß√£o e economia h√≠drica",
         x = "Irriga√ß√£o (minutos)",
         y = "Economia de √Ågua (litros)") +
    theme_minimal() +
    theme(plot.title = element_text(hjust = 0.5, size = 14, face = "bold"),
          plot.subtitle = element_text(hjust = 0.5, size = 11))

  # Exibir gr√°ficos
  print(p1)
  print(p2)
  print(p3)
  print(p4)

  return(list(p1 = p1, p2 = p2, p3 = p3, p4 = p4))
}

# ===== MODELO PREDITIVO =====
criar_modelo_preditivo <- function(dados) {
  cat("\nü§ñ === MODELO PREDITIVO ===\n")

  # Modelo 1: Predi√ß√£o do tempo de irriga√ß√£o
  modelo_irrigacao <- lm(irrigacao_minutos ~ temperatura + umidade_solo +
                        ph_solo + npk_completo + previsao_chuva +
                        intensidade_chuva, data = dados)

  cat("\nüìä Modelo 1 - Predi√ß√£o de Irriga√ß√£o:\n")
  print(summary(modelo_irrigacao))

  # Modelo 2: Predi√ß√£o da efici√™ncia
  modelo_eficiencia <- lm(eficiencia ~ temperatura + umidade_solo +
                         ph_solo + npk_completo + irrigacao_minutos,
                         data = dados)

  cat("\nüìä Modelo 2 - Predi√ß√£o de Efici√™ncia:\n")
  print(summary(modelo_eficiencia))

  # Adicionar predi√ß√µes aos dados
  dados$irrigacao_predita <- predict(modelo_irrigacao, dados)
  dados$eficiencia_predita <- predict(modelo_eficiencia, dados)

  # Calcular m√©tricas de qualidade
  rmse_irrigacao <- sqrt(mean((dados$irrigacao_minutos - dados$irrigacao_predita)^2))
  rmse_eficiencia <- sqrt(mean((dados$eficiencia - dados$eficiencia_predita)^2))

  cat(sprintf("\n‚úÖ RMSE Irriga√ß√£o: %.2f minutos\n", rmse_irrigacao))
  cat(sprintf("‚úÖ RMSE Efici√™ncia: %.2f%%\n", rmse_eficiencia))

  # Gr√°fico de predi√ß√µes vs. real
  p_pred <- ggplot(dados, aes(x = irrigacao_minutos, y = irrigacao_predita)) +
    geom_point(alpha = 0.7, color = "darkblue", size = 2) +
    geom_abline(intercept = 0, slope = 1, color = "red", linetype = "dashed", size = 1) +
    geom_smooth(method = "lm", color = "green", se = TRUE, alpha = 0.3) +
    labs(title = "üéØ Predi√ß√µes vs. Valores Reais - Irriga√ß√£o",
         subtitle = "Linha vermelha = predi√ß√£o perfeita",
         x = "Irriga√ß√£o Real (minutos)",
         y = "Irriga√ß√£o Predita (minutos)") +
    theme_minimal() +
    theme(plot.title = element_text(hjust = 0.5, size = 14, face = "bold"),
          plot.subtitle = element_text(hjust = 0.5, size = 11))

  print(p_pred)

  return(list(modelo_irrigacao = modelo_irrigacao,
              modelo_eficiencia = modelo_eficiencia,
              rmse_irrigacao = rmse_irrigacao,
              rmse_eficiencia = rmse_eficiencia))
}

# ===== RECOMENDA√á√ïES OTIMIZADAS =====
gerar_recomendacoes <- function(dados, modelos) {
  cat("\nüí° === RECOMENDA√á√ïES PARA OTIMIZA√á√ÉO ===\n")

  # Cen√°rio √≥timo para tomate
  cenario_otimo <- data.frame(
    temperatura = 23,
    umidade_solo = 70,
    ph_solo = 6.4,
    npk_completo = 1,
    previsao_chuva = 0,
    intensidade_chuva = 0
  )

  irrigacao_otima <- predict(modelos$modelo_irrigacao, cenario_otimo)
  eficiencia_otima <- predict(modelos$modelo_eficiencia,
                             cbind(cenario_otimo, irrigacao_minutos = irrigacao_otima))

  cat(sprintf("üéØ Irriga√ß√£o √≥tima predita: %.1f minutos/dia\n", irrigacao_otima))
  cat(sprintf("üéØ Efici√™ncia √≥tima predita: %.1f%%\n", eficiencia_otima))

  # An√°lises estat√≠sticas
  irrigacao_media <- mean(dados$irrigacao_minutos)
  eficiencia_media <- mean(dados$eficiencia)
  economia_total <- sum(dados$economia_agua)

  cat(sprintf("\nüìä Situa√ß√£o Atual:\n"))
  cat(sprintf("   ‚è±Ô∏è  Irriga√ß√£o m√©dia: %.1f minutos/dia\n", irrigacao_media))
  cat(sprintf("   üìà Efici√™ncia m√©dia: %.1f%%\n", eficiencia_media))
  cat(sprintf("   üíß Economia total: %.1f litros/m√™s\n", economia_total))

  # Potencial de melhoria
  economia_potencial <- max(0, irrigacao_media - irrigacao_otima)
  melhoria_eficiencia <- max(0, eficiencia_otima - eficiencia_media)

  cat(sprintf("\nüöÄ Potencial de Otimiza√ß√£o:\n"))
  cat(sprintf("   ‚è∞ Redu√ß√£o de irriga√ß√£o: %.1f min/dia (%.1f%%)\n",
              economia_potencial, (economia_potencial/irrigacao_media)*100))
  cat(sprintf("   üìà Melhoria de efici√™ncia: %.1f pontos percentuais\n",
              melhoria_eficiencia))

  # An√°lise de condi√ß√µes cr√≠ticas
  condicoes_criticas <- dados %>%
    filter(eficiencia < 85 | irrigacao_minutos > 70) %>%
    nrow()

  cat(sprintf("   ‚ö†Ô∏è  Dias sub-√≥timos: %d/%d (%.1f%%)\n",
              condicoes_criticas, nrow(dados),
              (condicoes_criticas/nrow(dados))*100))

  # Recomenda√ß√µes espec√≠ficas
  cat("\nüìã RECOMENDA√á√ïES ESPEC√çFICAS:\n")
  cat("1. üéØ Manter pH entre 6.0-6.8 maximiza efici√™ncia em 10-15%\n")
  cat("2. üíß Umidade do solo ideal: 60-80% (zona de conforto do tomate)\n")
  cat("3. üå± NPK completo reduz necessidade de irriga√ß√£o em ~20 min/dia\n")
  cat("4. üå°Ô∏è  Temperatura ideal: 20-25¬∞C para m√°xima efici√™ncia\n")
  cat("5. üåßÔ∏è  Monitoramento meteorol√≥gico evita irriga√ß√£o desnecess√°ria\n")
  cat("6. ‚è∞ Irriga√ß√£o > 70 min/dia indica problemas no sistema\n")
  cat("7. üìä Efici√™ncia < 85% requer revis√£o dos par√¢metros\n")

  # ROI estimado
  custo_agua_tradicional <- irrigacao_media * 30 * 0.005  # R$ 0.005 por minuto
  custo_agua_otimizado <- irrigacao_otima * 30 * 0.005
  economia_mensal <- custo_agua_tradicional - custo_agua_otimizado

  cat(sprintf("\nüí∞ AN√ÅLISE ECON√îMICA (estimativa):\n"))
  cat(sprintf("   üíµ Custo mensal atual: R$ %.2f\n", custo_agua_tradicional))
  cat(sprintf("   üíµ Custo mensal otimizado: R$ %.2f\n", custo_agua_otimizado))
  cat(sprintf("   üí∞ Economia mensal: R$ %.2f (%.1f%%)\n",
              economia_mensal, (economia_mensal/custo_agua_tradicional)*100))
  cat(sprintf("   üí∞ Economia anual: R$ %.2f\n", economia_mensal * 12))
}

# ===== RELAT√ìRIO EXECUTIVO =====
gerar_relatorio_executivo <- function(dados, modelos) {
  cat("\nüìÑ === RELAT√ìRIO EXECUTIVO ===\n")
  cat("üå± FarmTech Solutions - An√°lise de Otimiza√ß√£o de Irriga√ß√£o\n")
  cat("üçÖ Cultura: Tomate\n")
  cat("üìÖ Per√≠odo analisado:", format(min(dados$data), "%d/%m/%Y"),
      "a", format(max(dados$data), "%d/%m/%Y"), "\n")
  cat("üìä Amostra:", nrow(dados), "dias de dados\n")

  # KPIs principais
  cat("\nüéØ INDICADORES PRINCIPAIS:\n")
  cat(sprintf("   ‚è±Ô∏è  Irriga√ß√£o m√©dia: %.1f min/dia\n", mean(dados$irrigacao_minutos)))
  cat(sprintf("   üìà Efici√™ncia m√©dia: %.1f%%\n", mean(dados$eficiencia)))
  cat(sprintf("   üíß Economia de √°gua: %.1f L/m√™s\n", sum(dados$economia_agua)))
  cat(sprintf("   üå± NPK adequado: %.1f%% dos dias\n", mean(dados$npk_completo) * 100))
  cat(sprintf("   üß™ pH ideal: %.1f%% dos dias\n",
              mean(dados$ph_solo >= 6.0 & dados$ph_solo <= 6.8) * 100))

  # Qualidade dos modelos
  cat("\nü§ñ QUALIDADE DOS MODELOS:\n")
  cat(sprintf("   üìä R¬≤ Irriga√ß√£o: %.3f\n", summary(modelos$modelo_irrigacao)$r.squared))
  cat(sprintf("   üìä R¬≤ Efici√™ncia: %.3f\n", summary(modelos$modelo_eficiencia)$r.squared))
  cat(sprintf("   üìè RMSE Irriga√ß√£o: %.2f min\n", modelos$rmse_irrigacao))
  cat(sprintf("   üìè RMSE Efici√™ncia: %.2f%%\n", modelos$rmse_eficiencia))

  # Conclus√µes
  cat("\n‚úÖ CONCLUS√ïES:\n")
  cat("1. ‚úÖ Sistema de irriga√ß√£o inteligente reduz consumo de √°gua\n")
  cat("2. ‚úÖ Monitoramento de pH √© cr√≠tico para efici√™ncia\n")
  cat("3. ‚úÖ NPK completo otimiza tempo de irriga√ß√£o\n")
  cat("4. ‚úÖ Previs√£o meteorol√≥gica evita desperd√≠cio\n")
  cat("5. ‚úÖ Modelos preditivos auxiliam tomada de decis√£o\n")

  cat("\nüìà PR√ìXIMOS PASSOS:\n")
  cat("1. üîÑ Implementar otimiza√ß√µes sugeridas\n")
  cat("2. üìä Monitorar KPIs em tempo real\n")
  cat("3. ü§ñ Refinar modelos com mais dados\n")
  cat("4. üå± Expandir para outras culturas\n")
  cat("5. üí∞ Calcular ROI preciso\n")
}

# ===== FUN√á√ÉO PRINCIPAL =====
main <- function() {
  cat("üå± FarmTech Solutions - An√°lise Estat√≠stica Avan√ßada\n")
  cat("üçÖ Sistema de Irriga√ß√£o Inteligente para Tomates\n")
  cat(rep("=", 60), "\n", sep = "")

  # Verificar e instalar pacotes se necess√°rio
  verificar_pacotes()

  # Gerar dados simulados
  cat("üìä Gerando dados simulados baseados no sistema ESP32...\n")
  dados <- gerar_dados_irrigacao(30)

  # Salvar dados para refer√™ncia
  write.csv(dados, "dados_analise_farmtech.csv", row.names = FALSE)
  cat("üíæ Dados salvos em 'dados_analise_farmtech.csv'\n")

  # An√°lise explorat√≥ria
  cor_matrix <- analise_exploratoria(dados)

  # Criar visualiza√ß√µes
  graficos <- criar_graficos_principais(dados)

  # Criar modelos preditivos
  modelos <- criar_modelo_preditivo(dados)

  # Gerar recomenda√ß√µes
  gerar_recomendacoes(dados, modelos)

  # Relat√≥rio executivo
  gerar_relatorio_executivo(dados, modelos)

  cat("\n‚úÖ AN√ÅLISE CONCLU√çDA COM SUCESSO!\n")
  cat("üìÅ Arquivos gerados:\n")
  cat("   üìä dados_analise_farmtech.csv - Dataset completo\n")
  cat("   üìà Gr√°ficos exibidos no console\n")
  cat("   üìÑ Relat√≥rio impresso no console\n")

  cat("\nüöÄ Para usar em produ√ß√£o:\n")
  cat("1. Substitua dados simulados por dados reais do ESP32\n")
  cat("2. Ajuste par√¢metros conforme cultura espec√≠fica\n")
  cat("3. Implemente recomenda√ß√µes no sistema de irriga√ß√£o\n")
  cat("4. Monitore KPIs continuamente\n")

  return(list(dados = dados, modelos = modelos, correlacoes = cor_matrix))
}

# ===== FUN√á√ÉO AUXILIAR PARA VERIFICAR PACOTES =====
verificar_pacotes <- function() {
  pacotes_necessarios <- c("ggplot2", "dplyr", "corrplot", "forecast",
                          "lubridate", "gridExtra", "scales")

  pacotes_faltando <- pacotes_necessarios[!pacotes_necessarios %in%
                                         installed.packages()[,"Package"]]

  if(length(pacotes_faltando) > 0) {
    cat("üì¶ Instalando pacotes necess√°rios:", paste(pacotes_faltando, collapse = ", "), "\n")
    install.packages(pacotes_faltando, dependencies = TRUE)
  }
}

# ===== EXECUTAR AN√ÅLISE =====
if (interactive()) {
  cat("üöÄ Iniciando an√°lise estat√≠stica...\n")
  cat("üí° Pressione Ctrl+C para interromper\n\n")

  # Executar an√°lise principal
  resultados <- main()

  cat("\nüìä An√°lise finalizada! Resultados dispon√≠veis em 'resultados'\n")
  cat("üí° Digite 'View(resultados$dados)' para ver os dados\n")
  cat("üí° Digite 'summary(resultados$modelos$modelo_irrigacao)' para ver modelo\n")

} else {
  cat("üìÑ Script carregado. Execute main() para iniciar a an√°lise.\n")
  cat("üí° Ou execute source('este_arquivo.R') no console do R\n")
}